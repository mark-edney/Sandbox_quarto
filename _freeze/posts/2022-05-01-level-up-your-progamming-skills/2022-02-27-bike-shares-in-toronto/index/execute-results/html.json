{
  "hash": "72f6bb73a6faa0e36d9c5eb36aa1e1fb",
  "result": {
    "markdown": "---\ntitle: Bike shares in Toronto\nauthor: Mark Edney\ndate: '2022-02-27'\nslug: []\ncategories:\n  - Project\n  - Shiny App\n  - R\ndraft: false\ndescription: 'Analysis of a bike sharing app in Toronto'\narchives:\n  - 2022/02\nimage: 'bike_toronto.jpg'\ntoc: true\n---\n\n\n![](bike_toronto.jpg)\n\n> Photo by [Maarten van den Heuvel](https://unsplash.com/@mvdheuvel?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) on [Unsplash](https://unsplash.com/s/photos/toronto-bike?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)\n\n> This article is based on a project written on 01/14/2021\n\n## Bike Rental Shiny App\n\nThis application use the data collected from the [Toronto Open Data](https://open.toronto.ca/dataset/bike-share-toronto-ridership-data/) to generate a histogram of the usage of rental bikes in Toronto during the month of June in 2020.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ninstall.packages(\"opendatatoronto\", \n                 repos = \"https://cran.us.r-project.org\",\n                 dependencies = TRUE)\nlibrary(opendatatoronto)\nlibrary(tidyverse)\nlibrary(lubridate)\nlibrary(shiny)\n```\n:::\n\n\n## UI\n\nThere are two user inputs on the UI side:\n\n-   A slider that limits the maximum and minimum of the displayed values\n\n-   A checkbox that excludes users with a annual bike pass\n\n\n::: {.cell}\n\n```{.r .cell-code}\n        sidebarPanel(\n            sliderInput(\"dur\",\n                        \"Trip Duration:\",\n                        min = 0,\n                        max = 500,\n                        value = c(0,500)),\n            checkboxInput(\"freq\",\n                        \"Exclude annual users:\",\n                        value = FALSE))\n```\n:::\n\n\n## Server\n\nThe following code is used for the server side logic, this includes downloading the data from the 'opendatatoronto' library.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n # get package\n    package <- show_package(\"7e876c24-177c-4605-9cef-e50dd74c617f\")\n    \n    # get all resources for this package\n    resources <- list_package_resources(\"7e876c24-177c-4605-9cef-e50dd74c617f\")\n    # identify datastore resources; by default, Toronto Open Data sets datastore resource format to CSV for non-geospatial and GeoJSON for geospatial resources\n    datastore_resources <- filter(resources, tolower(format) %in% c('zip', 'geojson'))\n    # load the first datastore resource as a sample\n    data <- filter(datastore_resources, name == \"Bike share ridership 2020\") %>% get_resource()\n    data2 <-  data$`2020-06.csv`\n    data2[grepl(\"Time\",names(data2))] <- \n        lapply(data2[grepl(\"Time\",names(data2))], parse_date_time, orders = \"mdy HM\")\n    data2$Dur <- as.numeric(data2$End.Time - data2$Start.Time,units=\"mins\")\n```\n:::\n\n\n## Application\n\nThe final application takes a while to load as the data needs to be downloaded and sorted through. In future iterations, I would save the data locally as an RDS file.\n\n\n::: {.cell}\n<iframe src=\"https://m2edney.shinyapps.io/Toronto_bike/?_ga=2.75026646.519818068.1645317226-1341333380.1645206372\" width=\"672\" height=\"400px\" data-external=\"1\"></iframe>\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}